"""
Utility functions
"""


import os, sys
import _pickle as pickle

def writepickle(obj, filepath, verbose=True, protocol=-1):
	"""
	I write your python object obj into a pickle file at filepath.
	Leave protocol = -1 : I'll use the latest binary protocol of pickle.
	"""
	pkl_file = open(filepath, 'wb')

	pickle.dump(obj, pkl_file, protocol)
	pkl_file.close()
	if verbose: print("Wrote %s" % filepath)


def readpickle(filepath, verbose=True):
	"""
	I read a pickle file and return whatever object it contains.
	If the filepath ends with .gz, I'll unzip the pickle file.
	"""
	pkl_file = open(filepath, 'rb')
	obj = pickle.load(pkl_file, encoding='latin1')

	pkl_file.close()
	if verbose: print("Read %s" % filepath)
	return obj
